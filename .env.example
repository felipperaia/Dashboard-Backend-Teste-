# .env.example (TEMPLATE) — NÃO comitar com segredos reais.
# Copie para .env antes de rodar: cp .env.example .env
# Gere VAPID keys com: `npm i -g web-push` e `web-push generate-vapid-keys --json`
# e cole VAPID_PUBLIC_KEY / VAPID_PRIVATE_KEY abaixo.
#
# Para testes locais você pode usar um cluster MongoDB de desenvolvimento (Atlas ou local).
# Remova quaisquer chaves reais antes de commitar.

# MongoDB Atlas URI (substitua pelo seu usuário/cluster)
MONGO_URI=mongodb+srv://<db_user>:<db_password>@cluster0.mongodb.net/silo?retryWrites=true&w=majority

# JWT
JWT_SECRET=coloque_uma_chave_secreta_aqui
JWT_ACCESS_EXPIRE_MIN=15
JWT_REFRESH_EXPIRE_DAYS=7

# Admin seed secret (usar para scripts/seed_admin.py)
INIT_ADMIN_SECRET=uma_chave_unica_para_seed

# Telegram (opcional) - bot token do Telegram
TELEGRAM_BOT_TOKEN=

# VAPID (Web Push) - gere com web-push e cole aqui
VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=

# ThingSpeak mappings (JSON string) - preencher manualmente no .env real
THINGSPEAK_API_KEYS={}
THINGSPEAK_CHANNELS={}

# Collections (nomes padrão usados pelo sistema)
MONGO_COLLECTION_SENSORS=readings
MONGO_COLLECTION_WEATHER=meteorology
MONGO_COLLECTION_FORECAST=forecast_demeter
MONGO_COLLECTION_ML_METRICS=ml_metrics

# Identical readings dedupe window (seconds) used by ingestion and Spark pipeline
IDENTICAL_READINGS_MIN_SECONDS=300

# Luminosity thresholds (backend config)
LUMINOSITY_DARK_THRESHOLD=5
LUMINOSITY_OPEN_THRESHOLD=50

# Spark / Sparkz settings (usado pelos scripts em sparkz/)
# SPARK_MASTER_URL pode ser `local[*]` para desenvolvimento ou spark://HOST:PORT
SPARK_MASTER_URL=local[*]
SPARK_APP_NAME=Demeter-Forecast
# Caminho / URI onde os modelos serão salvos (opcional por target/horizon)
# Exemplo: SPARK_MODEL_PATH_TEMPERATURE_H1=/models/temperature_h1
# Se não definido o modelo será salvo em ./models/<target>_h<h>

# Execução do Python usado pelo Spark/retrain endpoint
PYSPARK_PYTHON=python

# Model path overrides (opcionais)
# SPARK_MODEL_PATH_TEMPERATURE_H1=
# SPARK_MODEL_PATH_TEMPERATURE_H3=
# SPARK_MODEL_PATH_TEMPERATURE_H24=

# Storage backends (opcional): S3 / GCS / local
# If using S3, set MODEL_STORAGE_S3_BUCKET and AWS credentials
MODEL_STORAGE_S3_BUCKET=
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# Weather API
# OPEN_METEO does not require key, but if you use another provider add key here
WEATHER_API_KEY=

# ML trainer settings
# Comma-separated default horizons (horas)
DEFAULT_ML_HORIZONS=1,3,24
# Default targets
DEFAULT_ML_TARGETS=temperature,humidity,co2,flammable_gases

# Command used by backend retrain endpoint. By default it will call python sparkz/train.py
# For production use, replace with full spark-submit command including --packages for Mongo connector.
ML_TRAIN_COMMAND=python sparkz/train.py --horizons $DEFAULT_ML_HORIZONS --targets $DEFAULT_ML_TARGETS


# Keep-alive / ping settings (optional) - use to reduce chance de hibernação em hosts free (best-effort)
# KEEPALIVE_PING_URL : URL pública do app (ex: https://seu-app.onrender.com) usada para construir /health
# KEEPALIVE_PING_LLM_URL : URL do endpoint LLM (opcional) para pingar e manter o processo LLM aquecido
# KEEPALIVE_INTERVAL_MIN : intervalo em minutos entre pings (padrão 10)
KEEPALIVE_PING_URL=
KEEPALIVE_PING_LLM_URL=
KEEPALIVE_INTERVAL_MIN=10


# SMTP (optional fallback for email-to-sms) -- DESABILITADO POR PADRÃO
# Para desabilitar o SMS fallback, deixe estes campos em branco.
SMTP_HOST=
SMTP_PORT=
SMTP_USER=
SMTP_PASS=

# Outras configurações (opcionais)
# LOG_LEVEL=INFO
# CORS_ORIGINS=["http://localhost:3000","https://seu-site.netlify.app"]
